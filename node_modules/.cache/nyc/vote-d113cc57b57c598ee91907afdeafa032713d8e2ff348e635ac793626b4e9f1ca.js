function cov_f9avx6zfu(){var path="C:\\Users\\Rokon\\source\\repos\\SWENG894-Capstone-Project\\controllers\\vote.js";var hash="2455501359382fb32a5e3b5daca33149d501ecfd";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Rokon\\source\\repos\\SWENG894-Capstone-Project\\controllers\\vote.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:41}},"1":{start:{line:2,column:15},end:{line:2,column:32}},"2":{start:{line:4,column:13},end:{line:95,column:1}},"3":{start:{line:5,column:70},end:{line:5,column:78}},"4":{start:{line:6,column:4},end:{line:8,column:5}},"5":{start:{line:7,column:8},end:{line:7,column:82}},"6":{start:{line:10,column:27},end:{line:10,column:50}},"7":{start:{line:12,column:4},end:{line:94,column:5}},"8":{start:{line:14,column:8},end:{line:27,column:10}},"9":{start:{line:30,column:30},end:{line:30,column:105}},"10":{start:{line:31,column:28},end:{line:31,column:60}},"11":{start:{line:33,column:29},end:{line:33,column:38}},"12":{start:{line:37,column:30},end:{line:37,column:110}},"13":{start:{line:38,column:8},end:{line:40,column:9}},"14":{start:{line:39,column:12},end:{line:39,column:87}},"15":{start:{line:41,column:21},end:{line:41,column:35}},"16":{start:{line:44,column:20},end:{line:44,column:38}},"17":{start:{line:45,column:18},end:{line:45,column:62}},"18":{start:{line:46,column:18},end:{line:46,column:56}},"19":{start:{line:47,column:8},end:{line:49,column:9}},"20":{start:{line:48,column:12},end:{line:48,column:18}},"21":{start:{line:51,column:8},end:{line:66,column:9}},"22":{start:{line:53,column:37},end:{line:55,column:13}},"23":{start:{line:56,column:35},end:{line:56,column:62}},"24":{start:{line:57,column:12},end:{line:57,column:65}},"25":{start:{line:60,column:12},end:{line:60,column:94}},"26":{start:{line:61,column:12},end:{line:61,column:95}},"27":{start:{line:62,column:12},end:{line:62,column:91}},"28":{start:{line:64,column:12},end:{line:64,column:38}},"29":{start:{line:65,column:12},end:{line:65,column:34}},"30":{start:{line:69,column:28},end:{line:72,column:9}},"31":{start:{line:74,column:8},end:{line:90,column:9}},"32":{start:{line:75,column:12},end:{line:75,column:134}},"33":{start:{line:78,column:12},end:{line:81,column:14}},"34":{start:{line:84,column:12},end:{line:87,column:14}},"35":{start:{line:89,column:12},end:{line:89,column:137}},"36":{start:{line:92,column:8},end:{line:92,column:61}},"37":{start:{line:93,column:8},end:{line:93,column:89}},"38":{start:{line:97,column:0},end:{line:97,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:33},end:{line:95,column:1}},line:4}},branchMap:{"0":{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:6,column:4},end:{line:8,column:5}}],line:6},"1":{loc:{start:{line:6,column:8},end:{line:6,column:74}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:15}},{start:{line:6,column:19},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:49}},{start:{line:6,column:53},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:74}}],line:6},"2":{loc:{start:{line:38,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:38,column:8},end:{line:40,column:9}},{start:{line:38,column:8},end:{line:40,column:9}}],line:38},"3":{loc:{start:{line:47,column:8},end:{line:49,column:9}},type:"if",locations:[{start:{line:47,column:8},end:{line:49,column:9}},{start:{line:47,column:8},end:{line:49,column:9}}],line:47},"4":{loc:{start:{line:47,column:12},end:{line:47,column:70}},type:"binary-expr",locations:[{start:{line:47,column:12},end:{line:47,column:17}},{start:{line:47,column:22},end:{line:47,column:29}},{start:{line:47,column:33},end:{line:47,column:69}}],line:47},"5":{loc:{start:{line:51,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:66,column:9}},{start:{line:51,column:8},end:{line:66,column:9}}],line:51},"6":{loc:{start:{line:74,column:8},end:{line:90,column:9}},type:"if",locations:[{start:{line:74,column:8},end:{line:90,column:9}},{start:{line:74,column:8},end:{line:90,column:9}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0},b:{"0":[0,0],"1":[0,0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2455501359382fb32a5e3b5daca33149d501ecfd"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_f9avx6zfu=function(){return actualCoverage;};}return actualCoverage;}cov_f9avx6zfu();const db=(cov_f9avx6zfu().s[0]++,require("../routes/db-config"));const crypto=(cov_f9avx6zfu().s[1]++,require('crypto'));cov_f9avx6zfu().s[2]++;const vote=async(req,res)=>{cov_f9avx6zfu().f[0]++;const{pollId,candidateId,candidateName,userId,userEmail}=(cov_f9avx6zfu().s[3]++,req.body);cov_f9avx6zfu().s[4]++;if((cov_f9avx6zfu().b[1][0]++,!pollId)||(cov_f9avx6zfu().b[1][1]++,!candidateId)||(cov_f9avx6zfu().b[1][2]++,!candidateName)||(cov_f9avx6zfu().b[1][3]++,!userId)||(cov_f9avx6zfu().b[1][4]++,!userEmail)){cov_f9avx6zfu().b[0][0]++;cov_f9avx6zfu().s[5]++;return res.json({status:"error",error:"Please select a candidate."});}else{cov_f9avx6zfu().b[0][1]++;}const pollVotesTable=(cov_f9avx6zfu().s[6]++,`votes${pollId}`.trim());cov_f9avx6zfu().s[7]++;try{cov_f9avx6zfu().s[8]++;// Ensure the votes table for this poll exists
await db.query(`CREATE TABLE IF NOT EXISTS \`${pollVotesTable}\` (
                id INT AUTO_INCREMENT PRIMARY KEY,
                user_id INT NOT NULL,
                user_email VARCHAR(255) NOT NULL,
                candidate_id INT NOT NULL,
                candidate_name VARCHAR(255) NOT NULL,
                age INT NOT NULL,
                gender VARCHAR(255) NOT NULL,
                race VARCHAR(255) NOT NULL,
                vote_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                UNIQUE KEY unique_user_vote (user_id)
            )`);// Check if the poll is anonymous
const[pollResults]=(cov_f9avx6zfu().s[9]++,await db.query('SELECT enable_anonymous FROM polls WHERE id = ?',[pollId]));const isAnonymous=(cov_f9avx6zfu().s[10]++,pollResults[0]?.enable_anonymous);let finalUserEmail=(cov_f9avx6zfu().s[11]++,userEmail);let finalGender,finalRace;// Fetch the user's details
const[userDetails]=(cov_f9avx6zfu().s[12]++,await db.query('SELECT dob, gender, race FROM user_data WHERE id = ?',[userId]));cov_f9avx6zfu().s[13]++;if(userDetails.length===0){cov_f9avx6zfu().b[2][0]++;cov_f9avx6zfu().s[14]++;return res.status(404).json({status:"error",error:"User not found."});}else{cov_f9avx6zfu().b[2][1]++;}const user=(cov_f9avx6zfu().s[15]++,userDetails[0]);// Calculate the user's age
const dob=(cov_f9avx6zfu().s[16]++,new Date(user.dob));let age=(cov_f9avx6zfu().s[17]++,new Date().getFullYear()-dob.getFullYear());const m=(cov_f9avx6zfu().s[18]++,new Date().getMonth()-dob.getMonth());cov_f9avx6zfu().s[19]++;if((cov_f9avx6zfu().b[4][0]++,m<0)||(cov_f9avx6zfu().b[4][1]++,m===0)&&(cov_f9avx6zfu().b[4][2]++,new Date().getDate()<dob.getDate())){cov_f9avx6zfu().b[3][0]++;cov_f9avx6zfu().s[20]++;age--;}else{cov_f9avx6zfu().b[3][1]++;}cov_f9avx6zfu().s[21]++;if(isAnonymous){cov_f9avx6zfu().b[5][0]++;// Generate a unique anonymous voter email
const[anonVotesCount]=(cov_f9avx6zfu().s[22]++,await db.query(`SELECT COUNT(*) AS count FROM \`${pollVotesTable}\` WHERE user_email LIKE 'anonymous_voter_%'`));const anonymousCount=(cov_f9avx6zfu().s[23]++,anonVotesCount[0].count+1);cov_f9avx6zfu().s[24]++;finalUserEmail=`anonymous_voter_${anonymousCount}`;// Hash the user details
cov_f9avx6zfu().s[25]++;finalUserEmail=crypto.createHash('sha256').update(finalUserEmail).digest('hex');cov_f9avx6zfu().s[26]++;finalGender=crypto.createHash('sha256').update('gender_'+userId).digest('hex');cov_f9avx6zfu().s[27]++;finalRace=crypto.createHash('sha256').update('race_'+userId).digest('hex');}else{cov_f9avx6zfu().b[5][1]++;cov_f9avx6zfu().s[28]++;finalGender=user.gender;cov_f9avx6zfu().s[29]++;finalRace=user.race;}// Check if the user has already voted in this poll
const[userVotes]=(cov_f9avx6zfu().s[30]++,await db.query(`SELECT * FROM \`${pollVotesTable}\` WHERE user_id = ?`,[userId]));cov_f9avx6zfu().s[31]++;if(userVotes.length>0){cov_f9avx6zfu().b[6][0]++;cov_f9avx6zfu().s[32]++;return res.json({status:"error",error:"You have already voted in this poll! Going back to home.",redirectUrl:"/"});}else{cov_f9avx6zfu().b[6][1]++;cov_f9avx6zfu().s[33]++;// Insert the vote into the poll's votes table
await db.query(`INSERT INTO \`${pollVotesTable}\` (user_id, user_email, candidate_id, candidate_name, age, gender, race) VALUES (?, ?, ?, ?, ?, ?, ?)`,[userId,finalUserEmail,candidateId,candidateName,age,finalGender,finalRace]);// Update the vote count in the candidates table
cov_f9avx6zfu().s[34]++;await db.query(`UPDATE candidates SET votes = votes + 1 WHERE id = ?`,[candidateId]);cov_f9avx6zfu().s[35]++;return res.json({status:"success",success:"Your vote has been submitted! Thanks for participating!",redirectUrl:"/"});}}catch(error){cov_f9avx6zfu().s[36]++;console.error("Error during vote operation:",error);cov_f9avx6zfu().s[37]++;return res.status(500).json({status:"error",error:"Internal server error"});}};cov_f9avx6zfu().s[38]++;module.exports=vote;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZjlhdng2emZ1IiwiYWN0dWFsQ292ZXJhZ2UiLCJkYiIsInMiLCJyZXF1aXJlIiwiY3J5cHRvIiwidm90ZSIsInJlcSIsInJlcyIsImYiLCJwb2xsSWQiLCJjYW5kaWRhdGVJZCIsImNhbmRpZGF0ZU5hbWUiLCJ1c2VySWQiLCJ1c2VyRW1haWwiLCJib2R5IiwiYiIsImpzb24iLCJzdGF0dXMiLCJlcnJvciIsInBvbGxWb3Rlc1RhYmxlIiwidHJpbSIsInF1ZXJ5IiwicG9sbFJlc3VsdHMiLCJpc0Fub255bW91cyIsImVuYWJsZV9hbm9ueW1vdXMiLCJmaW5hbFVzZXJFbWFpbCIsImZpbmFsR2VuZGVyIiwiZmluYWxSYWNlIiwidXNlckRldGFpbHMiLCJsZW5ndGgiLCJ1c2VyIiwiZG9iIiwiRGF0ZSIsImFnZSIsImdldEZ1bGxZZWFyIiwibSIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImFub25Wb3Rlc0NvdW50IiwiYW5vbnltb3VzQ291bnQiLCJjb3VudCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJnZW5kZXIiLCJyYWNlIiwidXNlclZvdGVzIiwicmVkaXJlY3RVcmwiLCJzdWNjZXNzIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ2b3RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZShcIi4uL3JvdXRlcy9kYi1jb25maWdcIik7XHJcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xyXG5cclxuY29uc3Qgdm90ZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBwb2xsSWQsIGNhbmRpZGF0ZUlkLCBjYW5kaWRhdGVOYW1lLCB1c2VySWQsIHVzZXJFbWFpbCB9ID0gcmVxLmJvZHk7XHJcbiAgICBpZiAoIXBvbGxJZCB8fCAhY2FuZGlkYXRlSWQgfHwgIWNhbmRpZGF0ZU5hbWUgfHwgIXVzZXJJZCB8fCAhdXNlckVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yOiBcIlBsZWFzZSBzZWxlY3QgYSBjYW5kaWRhdGUuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcG9sbFZvdGVzVGFibGUgPSBgdm90ZXMke3BvbGxJZH1gLnRyaW0oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgdm90ZXMgdGFibGUgZm9yIHRoaXMgcG9sbCBleGlzdHNcclxuICAgICAgICBhd2FpdCBkYi5xdWVyeShcclxuICAgICAgICAgICAgYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFxcYCR7cG9sbFZvdGVzVGFibGV9XFxgIChcclxuICAgICAgICAgICAgICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcclxuICAgICAgICAgICAgICAgIHVzZXJfaWQgSU5UIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9lbWFpbCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVfaWQgSU5UIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlX25hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgYWdlIElOVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGdlbmRlciBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICByYWNlIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHZvdGVfdGltZSBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcclxuICAgICAgICAgICAgICAgIFVOSVFVRSBLRVkgdW5pcXVlX3VzZXJfdm90ZSAodXNlcl9pZClcclxuICAgICAgICAgICAgKWBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcG9sbCBpcyBhbm9ueW1vdXNcclxuICAgICAgICBjb25zdCBbcG9sbFJlc3VsdHNdID0gYXdhaXQgZGIucXVlcnkoJ1NFTEVDVCBlbmFibGVfYW5vbnltb3VzIEZST00gcG9sbHMgV0hFUkUgaWQgPSA/JywgW3BvbGxJZF0pO1xyXG4gICAgICAgIGNvbnN0IGlzQW5vbnltb3VzID0gcG9sbFJlc3VsdHNbMF0/LmVuYWJsZV9hbm9ueW1vdXM7XHJcblxyXG4gICAgICAgIGxldCBmaW5hbFVzZXJFbWFpbCA9IHVzZXJFbWFpbDtcclxuICAgICAgICBsZXQgZmluYWxHZW5kZXIsIGZpbmFsUmFjZTtcclxuXHJcbiAgICAgICAgLy8gRmV0Y2ggdGhlIHVzZXIncyBkZXRhaWxzXHJcbiAgICAgICAgY29uc3QgW3VzZXJEZXRhaWxzXSA9IGF3YWl0IGRiLnF1ZXJ5KCdTRUxFQ1QgZG9iLCBnZW5kZXIsIHJhY2UgRlJPTSB1c2VyX2RhdGEgV0hFUkUgaWQgPSA/JywgW3VzZXJJZF0pO1xyXG4gICAgICAgIGlmICh1c2VyRGV0YWlscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yOiBcIlVzZXIgbm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VyID0gdXNlckRldGFpbHNbMF07XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgdXNlcidzIGFnZVxyXG4gICAgICAgIGNvbnN0IGRvYiA9IG5ldyBEYXRlKHVzZXIuZG9iKTtcclxuICAgICAgICBsZXQgYWdlID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gZG9iLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgY29uc3QgbSA9IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSAtIGRvYi5nZXRNb250aCgpO1xyXG4gICAgICAgIGlmIChtIDwgMCB8fCAobSA9PT0gMCAmJiBuZXcgRGF0ZSgpLmdldERhdGUoKSA8IGRvYi5nZXREYXRlKCkpKSB7XHJcbiAgICAgICAgICAgIGFnZS0tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzQW5vbnltb3VzKSB7XHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGFub255bW91cyB2b3RlciBlbWFpbFxyXG4gICAgICAgICAgICBjb25zdCBbYW5vblZvdGVzQ291bnRdID0gYXdhaXQgZGIucXVlcnkoXHJcbiAgICAgICAgICAgICAgICBgU0VMRUNUIENPVU5UKCopIEFTIGNvdW50IEZST00gXFxgJHtwb2xsVm90ZXNUYWJsZX1cXGAgV0hFUkUgdXNlcl9lbWFpbCBMSUtFICdhbm9ueW1vdXNfdm90ZXJfJSdgXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFub255bW91c0NvdW50ID0gYW5vblZvdGVzQ291bnRbMF0uY291bnQgKyAxO1xyXG4gICAgICAgICAgICBmaW5hbFVzZXJFbWFpbCA9IGBhbm9ueW1vdXNfdm90ZXJfJHthbm9ueW1vdXNDb3VudH1gO1xyXG5cclxuICAgICAgICAgICAgLy8gSGFzaCB0aGUgdXNlciBkZXRhaWxzXHJcbiAgICAgICAgICAgIGZpbmFsVXNlckVtYWlsID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShmaW5hbFVzZXJFbWFpbCkuZGlnZXN0KCdoZXgnKTtcclxuICAgICAgICAgICAgZmluYWxHZW5kZXIgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKCdnZW5kZXJfJyArIHVzZXJJZCkuZGlnZXN0KCdoZXgnKTtcclxuICAgICAgICAgICAgZmluYWxSYWNlID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZSgncmFjZV8nICsgdXNlcklkKS5kaWdlc3QoJ2hleCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZpbmFsR2VuZGVyID0gdXNlci5nZW5kZXI7XHJcbiAgICAgICAgICAgIGZpbmFsUmFjZSA9IHVzZXIucmFjZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIGhhcyBhbHJlYWR5IHZvdGVkIGluIHRoaXMgcG9sbFxyXG4gICAgICAgIGNvbnN0IFt1c2VyVm90ZXNdID0gYXdhaXQgZGIucXVlcnkoXHJcbiAgICAgICAgICAgIGBTRUxFQ1QgKiBGUk9NIFxcYCR7cG9sbFZvdGVzVGFibGV9XFxgIFdIRVJFIHVzZXJfaWQgPSA/YCxcclxuICAgICAgICAgICAgW3VzZXJJZF1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodXNlclZvdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yOiBcIllvdSBoYXZlIGFscmVhZHkgdm90ZWQgaW4gdGhpcyBwb2xsISBHb2luZyBiYWNrIHRvIGhvbWUuXCIsIHJlZGlyZWN0VXJsOiBcIi9cIiB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbnNlcnQgdGhlIHZvdGUgaW50byB0aGUgcG9sbCdzIHZvdGVzIHRhYmxlXHJcbiAgICAgICAgICAgIGF3YWl0IGRiLnF1ZXJ5KFxyXG4gICAgICAgICAgICAgICAgYElOU0VSVCBJTlRPIFxcYCR7cG9sbFZvdGVzVGFibGV9XFxgICh1c2VyX2lkLCB1c2VyX2VtYWlsLCBjYW5kaWRhdGVfaWQsIGNhbmRpZGF0ZV9uYW1lLCBhZ2UsIGdlbmRlciwgcmFjZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXHJcbiAgICAgICAgICAgICAgICBbdXNlcklkLCBmaW5hbFVzZXJFbWFpbCwgY2FuZGlkYXRlSWQsIGNhbmRpZGF0ZU5hbWUsIGFnZSwgZmluYWxHZW5kZXIsIGZpbmFsUmFjZV1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdm90ZSBjb3VudCBpbiB0aGUgY2FuZGlkYXRlcyB0YWJsZVxyXG4gICAgICAgICAgICBhd2FpdCBkYi5xdWVyeShcclxuICAgICAgICAgICAgICAgIGBVUERBVEUgY2FuZGlkYXRlcyBTRVQgdm90ZXMgPSB2b3RlcyArIDEgV0hFUkUgaWQgPSA/YCxcclxuICAgICAgICAgICAgICAgIFtjYW5kaWRhdGVJZF1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIsIHN1Y2Nlc3M6IFwiWW91ciB2b3RlIGhhcyBiZWVuIHN1Ym1pdHRlZCEgVGhhbmtzIGZvciBwYXJ0aWNpcGF0aW5nIVwiLCByZWRpcmVjdFVybDogXCIvXCIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIHZvdGUgb3BlcmF0aW9uOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB2b3RlO1xyXG4iXSwibWFwcGluZ3MiOiJ3d0pBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosS0FBTSxDQUFBRSxFQUFFLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMscUJBQXFCLENBQUMsRUFDekMsS0FBTSxDQUFBQyxNQUFNLEVBQUFMLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUNKLGFBQUEsR0FBQUcsQ0FBQSxNQUVqQyxLQUFNLENBQUFHLElBQUksQ0FBRyxLQUFBQSxDQUFPQyxHQUFHLENBQUVDLEdBQUcsR0FBSyxDQUFBUixhQUFBLEdBQUFTLENBQUEsTUFDN0IsS0FBTSxDQUFFQyxNQUFNLENBQUVDLFdBQVcs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